{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["'use server';\nimport {\n  generateFeatureImportanceInsights,\n  GenerateFeatureImportanceInsightsInput,\n} from '@/ai/flows/generate-feature-importance-insights';\nimport {\n  explainPredictionResult,\n  ExplainPredictionResultInput,\n} from '@/ai/flows/explain-prediction-result';\n\nexport async function getFeatureImportanceInsights(\n  input: GenerateFeatureImportanceInsightsInput\n) {\n  const result = await generateFeatureImportanceInsights(input);\n  return result.insights;\n}\n\nexport async function getPredictionExplanation(\n  input: ExplainPredictionResultInput\n) {\n  const result = await explainPredictionResult(input);\n  return result.explanation;\n}\n"],"names":[],"mappings":";;;;;;IAUsB,+BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["'use server';\nimport {\n  generateFeatureImportanceInsights,\n  GenerateFeatureImportanceInsightsInput,\n} from '@/ai/flows/generate-feature-importance-insights';\nimport {\n  explainPredictionResult,\n  ExplainPredictionResultInput,\n} from '@/ai/flows/explain-prediction-result';\n\nexport async function getFeatureImportanceInsights(\n  input: GenerateFeatureImportanceInsightsInput\n) {\n  const result = await generateFeatureImportanceInsights(input);\n  return result.insights;\n}\n\nexport async function getPredictionExplanation(\n  input: ExplainPredictionResultInput\n) {\n  const result = await explainPredictionResult(input);\n  return result.explanation;\n}\n"],"names":[],"mappings":";;;;;;IAiBsB,2BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/placeholder-images.ts"],"sourcesContent":["import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n\nexport const datasetImageMap: Record<string, ImagePlaceholder> =\n  PlaceHolderImages.reduce((acc, img) => {\n    acc[img.id] = img;\n    return acc;\n  }, {} as Record<string, ImagePlaceholder>);\n"],"names":[],"mappings":";;;;AAAA;;AASO,MAAM,oBAAwC,2GAAA,CAAA,UAAI,CAAC,iBAAiB;AAEpE,MAAM,kBACX,kBAAkB,MAAM,CAAC,CAAC,KAAK;IAC7B,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG;IACd,OAAO;AACT,GAAG,CAAC","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-random-forest.ts"],"sourcesContent":["\n\n'use client';\nimport { useState, useReducer, useCallback, useEffect } from 'react';\nimport type {\n  TaskType,\n  Hyperparameters,\n  Metrics,\n  FeatureImportance,\n  Prediction,\n  ChartDataPoint,\n  DecisionTree,\n  CurveDataPoint,\n  PdpData,\n  DecisionNode,\n  ForestSimulation,\n  TreeSimulation,\n  DatasetOption,\n  DatasetMetadata,\n  LeafNode,\n  UserLevel,\n} from '@/lib/types';\nimport housingDataset from '@/lib/data/california-housing.json';\nimport wineDataset from '@/lib/data/wine-quality.json';\nimport diabetesDataset from '@/lib/data/diabetes.json';\nimport linnerudDataset from '@/lib/data/linnerud.json';\nimport breastCancerDataset from '@/lib/data/breast-cancer.json';\nimport digitsDataset from '@/lib/data/digits.json';\nimport datasetsMetadata from '@/lib/data/datasets-metadata.json';\nimport patientData from '@/lib/data/synthetic-patient-data.json';\n\nimport { getFeatureImportanceInsights, getPredictionExplanation } from '@/lib/actions';\nimport { useToast } from '@/hooks/use-toast';\n\ntype Status = 'idle' | 'loading' | 'success' | 'error';\n\nconst BASELINE_HYPERPARAMETERS: Hyperparameters = {\n  n_estimators: 3,\n  max_depth: 3,\n  min_samples_split: 2,\n  min_samples_leaf: 1,\n  max_features: 'sqrt',\n  bootstrap: true,\n  min_impurity_decrease: 0.0,\n  criterion: 'gini',\n  class_weight: null,\n};\n\nconst DATASETS: Record<TaskType, DatasetOption[]> = {\n    regression: [\n        { name: 'California Housing (Real Estate)', value: 'california-housing', data: housingDataset, target: 'MedHouseVal' },\n        { name: 'Diabetes (Medical)', value: 'diabetes', data: diabetesDataset, target: 'DiseaseProgression' },\n        { name: 'Linnerud (Physiological)', value: 'linnerud', data: linnerudDataset, target: 'Weight' },\n    ],\n    classification: [\n        { name: 'Heart Attack Risk', value: 'synthetic-patient-data', data: patientData, target: 'Risk' },\n        { name: 'Wine Quality (Chemistry)', value: 'wine-quality', data: wineDataset, target: 'quality' },\n        { name: 'Breast Cancer Wisconsin (Medical)', value: 'breast-cancer', data: breastCancerDataset, target: 'Diagnosis' },\n        { name: 'Digits Recognition (Image Recognition)', value: 'digits', data: digitsDataset, target: 'Digit' },\n    ]\n};\n\nconst getInitialStateForTask = (task: TaskType, datasetName: string): Omit<State, 'userLevel' | 'selectedRole' | 'showSyntheticData' | 'showHeartAttackPrediction'> => {\n    const datasetOption = DATASETS[task].find(d => d.value === datasetName) ?? DATASETS[task][0];\n    const dataset = datasetOption.data;\n    const allHeaders = Object.keys(dataset[0] ?? {});\n    const targetColumn = datasetOption.target;\n    const selectedFeatures = allHeaders.filter(h => h !== targetColumn);\n\n    return {\n        task,\n        datasetName: datasetOption.value,\n        hyperparameters: BASELINE_HYPERPARAMETERS,\n        selectedFeatures,\n        targetColumn,\n        testSize: 0.2,\n    };\n};\n\n\ntype State = {\n  task: TaskType;\n  datasetName: string;\n  hyperparameters: Hyperparameters;\n  selectedFeatures: string[];\n  targetColumn: string;\n  testSize: number;\n  userLevel: UserLevel;\n  selectedRole: string | null;\n  showSyntheticData: boolean;\n  showHeartAttackPrediction: boolean;\n};\n\ntype Data = {\n  dataset: Record<string, any>[];\n  metrics: (Metrics & { confusionMatrix?: number[][] }) | null;\n  featureImportance: FeatureImportance[];\n  history: Prediction[];\n  chartData: ChartDataPoint[] | null;\n  insights: string;\n  baselineMetrics: (Metrics & { confusionMatrix?: number[][] }) | null;\n  baselineFeatureImportance: FeatureImportance[];\n  baselineChartData: ChartDataPoint[] | null;\n  decisionTree: DecisionTree | null;\n  rocCurveData: CurveDataPoint[] | null;\n  prCurveData: CurveDataPoint[] | null;\n  pdpData: PdpData | null;\n  forestSimulation: ForestSimulation | null;\n  metadata: DatasetMetadata | null;\n  placeholderValues: Record<string, any> | null;\n};\n\ntype Action =\n  | { type: 'SET_TASK'; payload: TaskType }\n  | { type: 'SET_DATASET'; payload: string }\n  | { type: 'SET_HYPERPARAMETERS'; payload: Partial<Hyperparameters> }\n  | { type: 'SET_SELECTED_FEATURES'; payload: string[] }\n  | { type: 'SET_TARGET_COLUMN'; payload: string }\n  | { type: 'SET_TEST_SIZE'; payload: number }\n  | { type: 'SET_USER_LEVEL'; payload: UserLevel }\n  | { type: 'SET_SELECTED_ROLE'; payload: string | null }\n  | { type: 'SET_SHOW_SYNTHETIC_DATA', payload: boolean }\n  | { type: 'SET_SHOW_HEART_ATTACK_PREDICTION', payload: boolean };\n\nconst initialState: State = {\n    ...getInitialStateForTask('classification', 'wine-quality'),\n    userLevel: 'beginner',\n    selectedRole: null,\n    showSyntheticData: false,\n    showHeartAttackPrediction: false,\n};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'SET_TASK': {\n        if (state.userLevel === 'beginner') {\n            return state; // In beginner mode, task is locked to dataset\n        }\n        const newDatasetOption = DATASETS[action.payload][0];\n        return { \n            ...state, \n            task: action.payload,\n            datasetName: newDatasetOption.value,\n            targetColumn: newDatasetOption.target,\n            selectedFeatures: Object.keys(newDatasetOption.data[0] ?? {}).filter(h => h !== newDatasetOption.target),\n        };\n    }\n    case 'SET_DATASET': {\n        const selectedDataset = \n            Object.values(DATASETS).flat().find(d => d.value === action.payload)\n            ?? DATASETS[state.task][0];\n\n        const newTask = Object.keys(DATASETS.classification).some(key => DATASETS.classification.some(d => d.value === action.payload)) ? 'classification' : 'regression';\n        \n        const allHeaders = Object.keys(selectedDataset.data[0] ?? {});\n        const targetColumn = selectedDataset.target;\n        const selectedFeatures = allHeaders.filter(h => h !== targetColumn);\n\n        return {\n            ...state,\n            task: newTask,\n            datasetName: action.payload,\n            targetColumn,\n            selectedFeatures,\n        };\n    }\n    case 'SET_HYPERPARAMETERS':\n      return { ...state, hyperparameters: { ...state.hyperparameters, ...action.payload } };\n    case 'SET_SELECTED_FEATURES':\n      return { ...state, selectedFeatures: action.payload };\n    case 'SET_TARGET_COLUMN': {\n      return { ...state, targetColumn: action.payload };\n    }\n    case 'SET_TEST_SIZE':\n        return { ...state, testSize: action.payload };\n    case 'SET_USER_LEVEL':\n        return { ...state, userLevel: action.payload, selectedRole: null }; // Reset role on level change\n    case 'SET_SELECTED_ROLE':\n        return { ...state, selectedRole: action.payload, showHeartAttackPrediction: false, showSyntheticData: false };\n    case 'SET_SHOW_SYNTHETIC_DATA':\n        return { ...state, showSyntheticData: action.payload };\n    case 'SET_SHOW_HEART_ATTACK_PREDICTION':\n        return { ...state, showHeartAttackPrediction: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst pseudoRandom = (seed: number) => {\n    let x = Math.sin(seed) * 10000;\n    return x - Math.floor(x);\n};\n\nconst generateMockTree = (\n  features: string[],\n  task: TaskType,\n  hyperparameters: Hyperparameters,\n  depth: number = 0,\n  seed: number = 1,\n  parentSamples: number = 2000\n): DecisionTree => {\n  const { max_depth = 10, min_samples_split, min_samples_leaf } = hyperparameters;\n  const nodeSeed = seed + depth;\n  const samples = Math.max(min_samples_leaf, Math.floor(parentSamples * (0.4 + pseudoRandom(nodeSeed) * 0.2)));\n\n  if (depth >= max_depth || samples < min_samples_split) {\n    let leafValue: number[];\n    if (task === 'regression') {\n      leafValue = [pseudoRandom(nodeSeed * 2) * 3 + 1];\n    } else {\n      const class1Samples = Math.floor(pseudoRandom(nodeSeed * 2) * samples);\n      leafValue = [samples - class1Samples, class1Samples];\n    }\n    return {\n      type: 'leaf',\n      value: leafValue,\n      samples: samples,\n    } satisfies LeafNode;\n  }\n\n  let nodeValue: number[];\n  let impurity: number;\n  let criterion: DecisionNode['criterion'] = 'MSE';\n\n  if (task === 'regression') {\n    nodeValue = [pseudoRandom(nodeSeed * 3) * 3 + 1];\n    impurity = pseudoRandom(nodeSeed * 4) * 10;\n    criterion = 'MSE';\n  } else {\n    const class0 = Math.floor(pseudoRandom(nodeSeed * 3) * samples);\n    const class1 = samples - class0;\n    nodeValue = [class0, class1];\n    const p0 = class0 / samples;\n    const p1 = class1 / samples;\n    impurity = hyperparameters.criterion === 'entropy'\n      ? -(p0 * Math.log2(p0 || 1)) - (p1 * Math.log2(p1 || 1))\n      : 1 - (p0 ** 2 + p1 ** 2);\n    criterion = hyperparameters.criterion === 'entropy' ? 'Entropy' : 'Gini';\n  }\n\n  const feature = features[Math.floor(pseudoRandom(nodeSeed * 5) * features.length)];\n  const threshold = pseudoRandom(nodeSeed * 6) * 100;\n\n  return {\n    type: 'node',\n    feature,\n    threshold,\n    samples,\n    impurity,\n    criterion,\n    value: nodeValue,\n    children: [\n      generateMockTree(features, task, hyperparameters, depth + 1, seed + 1, samples),\n      generateMockTree(features, task, hyperparameters, depth + 1, seed + (max_depth - depth + 1) * 2, samples)\n    ]\n  } satisfies DecisionNode;\n};\n\n\nconst createSeed = (state: Omit<State, 'userLevel' | 'selectedRole' | 'showSyntheticData' | 'showHeartAttackPrediction'>, salt: string = '') => {\n    let seed = 0;\n    const str = JSON.stringify(state.hyperparameters) + state.testSize + state.targetColumn + state.task + state.datasetName + salt;\n    for (let i = 0; i < str.length; i++) {\n        seed = (seed << 5) - seed + str.charCodeAt(i);\n        seed |= 0; \n    }\n    return seed;\n};\n\nconst generateRocCurveData = (seed: number): CurveDataPoint[] => {\n    const data: CurveDataPoint[] = [{ x: 0, y: 0 }];\n    let lastY = 0;\n    for (let i = 1; i <= 10; i++) {\n        const x = i / 10;\n        // Ensure TPR (y) is always >= FPR (x) and is monotonically increasing\n        let newY = lastY + pseudoRandom(seed + i) * (1 - lastY) * 0.5;\n        newY = Math.max(newY, lastY); // Ensure monotonic\n        if (newY < x) {\n          newY = x + pseudoRandom(seed - i) * (1-x)*0.2;\n        }\n        lastY = Math.min(newY, 1);\n        data.push({ x, y: lastY });\n    }\n    data.push({ x: 1, y: 1 });\n    \n    // Make sure y is always >= x\n    return data.map(p => ({ x: p.x, y: Math.max(p.x, p.y) })).sort((a,b) => a.x - b.x);\n};\n\nconst generatePrCurveData = (seed: number): CurveDataPoint[] => {\n    const data: CurveDataPoint[] = [];\n    let lastPrecision = 1.0;\n\n    // Start with high precision at low recall\n    data.push({ x: 0.0, y: 1.0 });\n    data.push({ x: 0.1, y: 0.98 + pseudoRandom(seed - 1) * 0.02 });\n\n    for (let i = 2; i <= 10; i++) {\n        const recall = i / 10;\n        // Precision tends to drop as recall increases.\n        const dropFactor = Math.pow(recall, 1.5);\n        const drop = pseudoRandom(seed + i) * 0.4 * dropFactor;\n        let newPrecision = lastPrecision - drop;\n        \n        // Add some noise to make it less smooth\n        newPrecision += (pseudoRandom(seed - i) - 0.5) * 0.1;\n        newPrecision = Math.max(0, Math.min(lastPrecision, newPrecision)); // Ensure it's non-increasing\n\n        data.push({ x: recall, y: newPrecision });\n        lastPrecision = newPrecision;\n    }\n    \n    // Ensure the curve ends at a reasonable point.\n    data.push({ x: 1, y: Math.max(0.1, data[data.length-1].y - pseudoRandom(seed+11)*0.2) });\n\n    return data.sort((a,b) => a.x - b.x);\n};\n\n\nconst generatePdpData = (features: string[], dataset: Record<string, any>[], task: TaskType, seed: number): PdpData => {\n    const pdp: PdpData = {};\n    features.forEach((feature, i) => {\n        const featureSeed = seed + i * 100;\n        const featureData = dataset.map(row => row[feature]).filter(val => typeof val === 'number') as number[];\n        if(featureData.length === 0) return;\n\n        const sortedUniqueValues = [...new Set(featureData)].sort((a, b) => a - b);\n        const basePrediction = task === 'regression' ? 2.5 : 0.6;\n        \n        const effect = sortedUniqueValues.map((val, j) => {\n            const pointSeed = featureSeed + j;\n            const noise = (pseudoRandom(pointSeed) - 0.5) * 0.1;\n            const trend = Math.sin(j / sortedUniqueValues.length * Math.PI * 2) * (task === 'regression' ? 0.5 : 0.2);\n            return basePrediction + trend + noise;\n        });\n\n        pdp[feature] = sortedUniqueValues.map((value, index) => ({\n            featureValue: value,\n            prediction: effect[index],\n        }));\n    });\n    return pdp;\n};\n\nconst generateForestSimulation = (state: Omit<State, 'userLevel' | 'selectedRole' | 'showSyntheticData' | 'showHeartAttackPrediction'>, seed: number): ForestSimulation => {\n    const { selectedFeatures, task, hyperparameters } = state;\n    const numTrees = hyperparameters.n_estimators;\n\n    const trees: TreeSimulation[] = Array.from({ length: numTrees }, (_, i) => {\n        const treeSeed = seed + i * 50;\n        const shuffledFeatures = [...selectedFeatures].sort(() => pseudoRandom(treeSeed) - 0.5);\n        const mockTree = generateMockTree(selectedFeatures, task, hyperparameters, 0, treeSeed + 3);\n\n        let prediction: number;\n        if (task === 'regression') {\n            prediction = 1 + pseudoRandom(treeSeed + 1) * 4;\n        } else {\n             if (hyperparameters.n_estimators === 3 && i === 2) {\n                // For baseline with 3 trees, make the last one different\n                prediction = pseudoRandom(treeSeed + 2) > 0.4 ? 0 : 1;\n            } else {\n                prediction = pseudoRandom(treeSeed + 2) > 0.4 ? 1 : 0;\n            }\n        }\n\n        return {\n            id: i,\n            prediction,\n            keyFeatures: shuffledFeatures.slice(0, 3),\n            tree: mockTree,\n            samples: mockTree.samples\n        };\n    });\n\n    return { trees };\n}\n\n\nconst mockTrainModel = async (\n  state: Omit<State, 'userLevel' | 'selectedRole' | 'showSyntheticData' | 'showHeartAttackPrediction'>,\n  dataset: Record<string, any>[],\n  isBaseline: boolean = false,\n): Promise<Omit<Data, 'dataset' | 'insights' | 'baselineMetrics' | 'baselineFeatureImportance' | 'baselineChartData' | 'metadata' | 'placeholderValues'>> => {\n  await new Promise((res) => setTimeout(res, 1500));\n\n  const { task, selectedFeatures } = state;\n  const hyperparameters = isBaseline ? BASELINE_HYPERPARAMETERS : state.hyperparameters;\n  const stateForSeed = isBaseline ? { ...state, hyperparameters: BASELINE_HYPERPARAMETERS } : state;\n\n  const seed = createSeed(stateForSeed, task);\n\n  let metrics: Data['metrics'];\n  let rocCurveData: CurveDataPoint[] | null = null;\n  let prCurveData: CurveDataPoint[] | null = null;\n\n  if (task === 'regression') {\n     const baseR2 = 0.65 + (hyperparameters.max_depth / 100) + (hyperparameters.n_estimators / 5000);\n    const baseRmse = 0.5 - (hyperparameters.max_depth / 150) - (hyperparameters.n_estimators / 7000);\n    metrics = {\n      r2: baseR2 + pseudoRandom(seed) * 0.05,\n      rmse: baseRmse - pseudoRandom(seed * 2) * 0.05,\n      mae: baseRmse * 0.8 - pseudoRandom(seed * 3) * 0.05,\n    };\n  } else {\n    const baseAccuracy = 0.85 + (hyperparameters.n_estimators / 10000) - (hyperparameters.min_samples_split / 100);\n    metrics = {\n      accuracy: baseAccuracy + pseudoRandom(seed) * 0.02,\n      precision: baseAccuracy - 0.01 + pseudoRandom(seed * 2) * 0.03,\n      recall: baseAccuracy + 0.01 + pseudoRandom(seed * 3) * 0.02,\n      confusionMatrix: [\n        [Math.floor(85 + pseudoRandom(seed * 4) * 10), Math.floor(1 + pseudoRandom(seed * 5) * 5)],\n        [Math.floor(2 + pseudoRandom(seed * 6) * 5), Math.floor(90 + pseudoRandom(seed * 7) * 10)],\n      ],\n    };\n    rocCurveData = generateRocCurveData(seed);\n    prCurveData = generatePrCurveData(seed);\n  }\n\n  const featureImportance = selectedFeatures\n    .map((feature, i) => ({\n      feature,\n      importance: pseudoRandom(seed + i * 10),\n    }))\n    .sort((a, b) => b.importance - a.importance);\n\n  const history: Prediction[] = dataset.slice(0, 15).map((row, i) => {\n    const actual = row[state.targetColumn];\n    let prediction: number;\n    const predSeed = seed + i;\n\n    if (task === 'regression') {\n       prediction = actual * (0.8 + pseudoRandom(predSeed) * 0.4);\n    } else {\n        const threshold = task === 'wine-quality' ? 10.5 : 0.5; // Different threshold for different datasets\n        const featureToUse = task === 'wine-quality' ? 'alcohol' : selectedFeatures[0];\n        prediction = (row[featureToUse] + pseudoRandom(predSeed) * 2) > threshold ? 1 : 0;\n    }\n\n    const features = selectedFeatures.reduce((acc, feat) => {\n      acc[feat] = row[feat];\n      return acc;\n    }, {} as Record<string, number>);\n\n    return {\n      id: `pred_${Date.now()}_${i}`,\n      date: new Date().toISOString(),\n      features,\n      actual: actual,\n      prediction: task === 'classification' ? prediction : parseFloat(prediction.toFixed(3)),\n    };\n  });\n  \n  const chartData = history.map(p => ({ actual: p.actual, prediction: p.prediction }));\n  const decisionTree = generateMockTree(selectedFeatures, task, hyperparameters, 0, seed);\n  const pdpData = generatePdpData(selectedFeatures, dataset, task, seed);\n  const forestSimulation = generateForestSimulation(stateForSeed, seed);\n\n  return { metrics, featureImportance, history, chartData, decisionTree, rocCurveData, prCurveData, pdpData, forestSimulation };\n};\n\nconst mockPredict = (\n    values: Record<string, number>,\n    state: Omit<State, 'userLevel' | 'selectedRole' | 'showSyntheticData' | 'showHeartAttackPrediction'>,\n): Prediction => {\n  const { task, selectedFeatures } = state;\n  const seedState = { ...state, selectedFeatures: Object.keys(values) };\n  const seed = createSeed(seedState, 'predict');\n  \n  const numTrees = state.hyperparameters.n_estimators;\n  const individualPredictions: number[] = [];\n  const forestSimulation = generateForestSimulation(seedState, seed);\n\n  for (let i = 0; i < numTrees; i++) {\n    const treeSeed = seed + i;\n    let treePrediction: number;\n    if (task === 'regression') {\n      const baseValue = Object.values(values).reduce((sum, v, i) => sum + v * pseudoRandom(treeSeed + i), 0) / (Object.keys(values).length || 1);\n      treePrediction = (baseValue % 5) + pseudoRandom(treeSeed + 1) * (i % 5);\n    } else {\n      const score = Object.values(values).reduce((sum, v, i) => sum + v * pseudoRandom(treeSeed + i), 0);\n      treePrediction = score > (50 + (pseudoRandom(treeSeed) - 0.5) * 20) ? 1 : 0;\n    }\n    individualPredictions.push(treePrediction);\n  }\n\n  let finalPrediction: number;\n  if (task === 'regression') {\n    finalPrediction = individualPredictions.reduce((a, b) => a + b, 0) / numTrees;\n  } else {\n    const votes: { [key: number]: number } = { 0: 0, 1: 0 };\n    individualPredictions.forEach(p => { votes[p]++; });\n    finalPrediction = votes[1] > votes[0] ? 1 : 0;\n  }\n\n  return {\n    id: `pred_${Date.now()}`,\n    date: new Date().toISOString(),\n    features: values,\n    actual: -1, // No actual value for real-time prediction\n    prediction: finalPrediction,\n    individualPredictions: individualPredictions,\n    forestSimulation: forestSimulation,\n  };\n};\n\nexport const useRandomForest = () => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [data, setData] = useState<Data>({\n    dataset: DATASETS['classification'][0].data,\n    metrics: null,\n    featureImportance: [],\n    history: [],\n    chartData: null,\n    insights: '',\n    baselineMetrics: null,\n    baselineFeatureImportance: [],\n    baselineChartData: null,\n    decisionTree: null,\n    rocCurveData: null,\n    prCurveData: null,\n    pdpData: null,\n    forestSimulation: null,\n    metadata: (datasetsMetadata as Record<string, DatasetMetadata>)['wine-quality'],\n    placeholderValues: DATASETS['classification'][0].data[0] || null,\n  });\n  const [status, setStatus] = useState<Status>('idle');\n  const { toast } = useToast();\n\n  const handleStateChange = <T>(type: Action['type']) => {\n    return (payload: T) => dispatch({ type, payload } as Action);\n  }\n\n  const trainModel = useCallback(async (isBaseline = false) => {\n      if (isBaseline) {\n        dispatch({ type: 'SET_HYPERPARAMETERS', payload: BASELINE_HYPERPARAMETERS });\n      }\n      setStatus('loading');\n      try {\n        const { userLevel, selectedRole, showSyntheticData, showHeartAttackPrediction, ...stateForTraining } = state;\n        const currentDataset = DATASETS[stateForTraining.task].find(d => d.value === stateForTraining.datasetName)?.data ?? [];\n        \n        const effectiveState = isBaseline ? { ...stateForTraining, hyperparameters: BASELINE_HYPERPARAMETERS } : stateForTraining;\n\n        const trainedData = await mockTrainModel(effectiveState, currentDataset, isBaseline);\n        \n        const updateInsights = (featureImportance: FeatureImportance[]) => {\n            if (featureImportance.length === 0) {\n                setData(d => ({ ...d, insights: 'Could not generate AI insights.' }));\n                return;\n            }\n            const featureImportancesForAI = featureImportance.reduce((acc, item) => {\n                acc[item.feature] = item.importance;\n                return acc;\n            }, {} as Record<string, number>);\n\n            getFeatureImportanceInsights({\n                featureImportances: featureImportancesForAI,\n                targetColumn: state.targetColumn,\n            }).then(insights => {\n                setData(d => ({ ...d, insights }));\n            }).catch(err => {\n                console.error(\"AI insight generation failed:\", err);\n                setData(d => ({ ...d, insights: 'Could not generate AI insights.' }));\n            });\n        }\n        \n        if (isBaseline) {\n            setData(d => ({ \n                ...d, \n                baselineMetrics: trainedData.metrics, \n                baselineFeatureImportance: trainedData.featureImportance, \n                baselineChartData: trainedData.chartData,\n                metrics: trainedData.metrics, // also set current metrics\n                featureImportance: trainedData.featureImportance,\n                chartData: trainedData.chartData,\n                history: trainedData.history,\n                decisionTree: trainedData.decisionTree,\n                rocCurveData: trainedData.rocCurveData,\n                prCurveData: trainedData.prCurveData,\n                pdpData: trainedData.pdpData,\n                forestSimulation: trainedData.forestSimulation,\n                insights: '',\n             }));\n             updateInsights(trainedData.featureImportance);\n        } else {\n            setData(d => ({ ...d, ...trainedData, insights: '' }));\n            updateInsights(trainedData.featureImportance);\n        }\n\n        setStatus('success');\n        toast({ title: `Model Trained Successfully`, description: `${isBaseline ? 'Baseline' : 'Tuned'} model results are ready.` });\n      } catch (error) {\n        setStatus('error');\n        const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred.';\n        toast({ title: 'Training Error', description: errorMessage, variant: 'destructive' });\n         if (isBaseline) {\n             setData(d => ({ ...d, baselineMetrics: null, baselineFeatureImportance: [] }));\n         } else {\n            setData(d => ({ ...d, metrics: null, featureImportance: [], history: [] }));\n         }\n      }\n    }, [state, toast]);\n\n    useEffect(() => {\n        if (state.userLevel === 'beginner') {\n            return;\n        }\n\n        const newDatasetOption = DATASETS[state.task].find(d => d.value === state.datasetName);\n        const newDataset = newDatasetOption ? newDatasetOption.data : [];\n        const newMetadata = (datasetsMetadata as Record<string, DatasetMetadata>)[state.datasetName] ?? null;\n        const newPlaceholders = newDataset[0] || null;\n        \n        setData({\n            dataset: newDataset,\n            metadata: newMetadata,\n            placeholderValues: newPlaceholders,\n            metrics: null,\n            featureImportance: [],\n            history: [],\n            chartData: null,\n            insights: '',\n            baselineMetrics: null,\n            baselineFeatureImportance: [],\n            baselineChartData: null,\n            decisionTree: null,\n            rocCurveData: null,\n            prCurveData: null,\n            pdpData: null,\n            forestSimulation: null,\n        });\n        setStatus('idle');\n    }, [state.task, state.datasetName, state.userLevel]);\n\n    useEffect(() => {\n        // Only auto-train if a baseline has been set and the hyperparameters have changed.\n        if (data.baselineMetrics && state.userLevel === 'advanced') {\n          const handler = setTimeout(() => trainModel(false), 500);\n          return () => clearTimeout(handler);\n        }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [JSON.stringify(state.hyperparameters), state.testSize]);\n    \n    const predict = useCallback(async (values: Record<string, number>): Promise<Prediction> => {\n        await new Promise(res => setTimeout(res, 1000));\n        const { userLevel, selectedRole, showSyntheticData, showHeartAttackPrediction, ...stateForPrediction } = state;\n        return mockPredict(values, stateForPrediction);\n    }, [state]);\n\n  const actions = {\n    setTask: handleStateChange('SET_TASK'),\n    setDataset: handleStateChange('SET_DATASET'),\n    setHyperparameters: handleStateChange('SET_HYPERPARAMETERS'),\n    setSelectedFeatures: handleStateChange('SET_SELECTED_FEATURES'),\n    setTargetColumn: handleStateChange('SET_TARGET_COLUMN'),\n    setTestSize: handleStateChange('SET_TEST_SIZE'),\n    setUserLevel: handleStateChange('SET_USER_LEVEL'),\n    setSelectedRole: handleStateChange('SET_SELECTED_ROLE'),\n    setShowSyntheticData: handleStateChange('SET_SHOW_SYNTHETIC_DATA'),\n    setShowHeartAttackPrediction: handleStateChange('SET_SHOW_HEART_ATTACK_PREDICTION'),\n    trainModel: () => trainModel(false),\n    trainBaselineModel: () => trainModel(true),\n    predict,\n  };\n\n  return { state, data, status, actions, availableDatasets: DATASETS[state.task] };\n};\n"],"names":[],"mappings":"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","debugId":null}}]
}